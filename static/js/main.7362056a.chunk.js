(this.webpackJsonplibraryfrontend=this.webpackJsonplibraryfrontend||[]).push([[0],{51:function(e,t,a){},72:function(e,t,a){e.exports=a(91)},77:function(e,t,a){},79:function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"},87:function(e,t,a){},91:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(21),l=a.n(r),s=a(27),i=(a(77),a(78),a(6)),c=a(7),u=a(9),h=a(8),m=(a(79),a(67)),d=a(23),p=a(94),g=a(98),b=a(93),k="https://backendapi.sloli.xyz";function E(e){return new Promise((function(t,a){var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="json",n.mode="cors",n.setRequestHeader("Accept","application/json"),null!=localStorage.getItem("logintoken")?n.setRequestHeader("Authorization","Bearer "+localStorage.getItem("logintoken")):n.setRequestHeader("Authorization","Bearer invalidtoken"),n.onload=function(){200===n.status?t(n):a(new Error(n.statusText))},n.onerror=function(){a(new Error(n.statusText))},n.send()}))}function v(e,t){return fetch(e,{method:"POST",mode:"cors",body:JSON.stringify(t),headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("logintoken")}}).then((function(e){return e.json()}))}function f(e,t){return fetch(e,{method:"DELETE",mode:"cors",body:JSON.stringify(t),headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("logintoken")}}).then((function(e){return e.json()}))}function y(e,t){return fetch(e,{method:"PUT",mode:"cors",body:JSON.stringify(t),headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("logintoken")}}).then((function(e){return e.json()}))}var w=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={height:e.height||"",width:e.width||""},n}return Object(c.a)(a,[{key:"render",value:function(){var e=this.state.height,t=this.state.width;return o.a.createElement("img",{style:{height:e,width:t},src:"/librarysystemForntend/images/loading.gif",alt:"loading"})}}]),a}(o.a.Component),S=a(97),O=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={isLoading:!0,bookid:e.bookid,bookname:"",bookauthor:"",bookisbn:"",bookstatus:"",showModal:!1,message:"please wait..."},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;E(k+"/books/".concat(this.state.bookid)).then((function(t){e.setState({bookname:t.response.bookname,bookauthor:t.response.author,bookisbn:t.response.ISBN,bookstatus:t.response.status,isLoading:!1})}))}},{key:"handleMakeAppoint",value:function(){var e=this;this.setState({showModal:!0}),v(k+"/userbooking/make",{bookid:this.state.bookid}).then((function(t){t.apointid&&e.setState({message:"appointed succeed, please collect the book in 7 days.",bookstatus:"appointed"})}))}},{key:"renderButtonForStatus",value:function(){return"available"!=this.state.bookstatus?o.a.createElement(b.a,{variant:"link"},this.state.bookstatus):o.a.createElement(b.a,{variant:"primary",onClick:this.handleMakeAppoint.bind(this)},"appoint it")}},{key:"onClickconfirmOk",value:function(){this.setState({showModal:!1})}},{key:"render",value:function(){return this.state.isLoading?o.a.createElement(w,null):o.a.createElement(o.a.Fragment,null,o.a.createElement(S.a,{show:this.state.showModal},o.a.createElement(S.a.Header,null),o.a.createElement(S.a.Body,null,this.state.message),o.a.createElement(S.a.Footer,null,o.a.createElement(b.a,{bsStyle:"danger",onClick:this.onClickconfirmOk.bind(this)},"ok"))),o.a.createElement("tr",null,o.a.createElement("td",null,this.state.bookid),o.a.createElement("td",null,this.state.bookname),o.a.createElement("td",null,this.state.bookauthor),o.a.createElement("td",null,this.state.bookisbn),o.a.createElement("td",null,this.renderButtonForStatus())))}}]),a}(o.a.Component),C=(a(51),function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={isLoading:!1,bookname:"",isSearch:!1,result:[],noresult:!1},n}return Object(c.a)(a,[{key:"handleSearch",value:function(){var e=this;this.setState({isLoading:!0,result:[]}),E(k+"/books?keyword=".concat(this.state.bookname)).then((function(t){t.response.length>0?(t.response.map((function(t,a){e.setState((function(e){return{result:[].concat(Object(d.a)(e.result),[t.bookid])}}))})),e.setState({isLoading:!1,isSearch:!0})):e.setState({isLoading:!1,noresult:!0,isSearch:!1})}))}},{key:"handleOnchangeKeyword",value:function(e){this.setState({bookname:e.target.value})}},{key:"renderResult",value:function(){return this.state.isLoading?o.a.createElement(w,null):this.state.isSearch?o.a.createElement(o.a.Fragment,null,o.a.createElement(p.a,{responsive:!0},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",null,"#"),o.a.createElement("th",null,"Book Name"),o.a.createElement("th",null,"Book Author"),o.a.createElement("th",null,"Book ISBN"),o.a.createElement("th",null,"Status"))),o.a.createElement("tbody",null,this.state.result.map((function(e,t){return o.a.createElement(O,{bookid:e,key:t})}))))):this.state.noresult?o.a.createElement("p",null,"no result found. sorry."):void 0}},{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"contentBorder"},o.a.createElement(g.a,null,o.a.createElement(g.a.Group,{controlId:"search"},o.a.createElement(g.a.Label,null,"Search Books"),o.a.createElement(g.a.Control,{onChange:this.handleOnchangeKeyword.bind(this),type:"text",placeholder:"Enter keyword"})),o.a.createElement(b.a,{onClick:this.handleSearch.bind(this),variant:"primary"},"Search")),this.renderResult()),o.a.createElement("div",null))}}]),a}(o.a.Component)),L=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={username:"",password:"",usertype:"normaluser",isLoading:!1,isLogin:!1,message:"Please wait..."},n}return Object(c.a)(a,[{key:"handleOnchangeUsername",value:function(e){this.setState({username:e.target.value})}},{key:"handleOnchangePassword",value:function(e){this.setState({password:e.target.value})}},{key:"handleOnchangeUsertype",value:function(e){this.setState({usertype:e.target.value})}},{key:"handleLogin",value:function(e){var t=this,a={username:this.state.username,password:this.state.password};if(this.setState({isLoading:!0}),"normaluser"==this.state.usertype)v(k+"/login",a).then((function(e){1==e.length?(localStorage.setItem("logintoken",e[0].token),t.setState({message:"Login succeed, welcome.",isLogin:!0})):t.setState({message:"password incorrect"})}));else if("manager"==this.state.usertype){v(k+"/login/manager",a).then((function(e){1==e.length?(localStorage.setItem("logintoken",e[0].token),t.setState({message:"Login succeed, welcome.",isLogin:!0})):t.setState({message:"password incorrect"})}))}}},{key:"handleClose",value:function(){this.setState({isLoading:!1}),this.state.isLogin&&(window.location="".concat("/librarysystemForntend","/"))}},{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"contentBorder"},o.a.createElement(g.a,null,o.a.createElement(g.a.Group,{controlId:"username"},o.a.createElement(g.a.Label,null,"Email:"),o.a.createElement(g.a.Control,{onChange:this.handleOnchangeUsername.bind(this),type:"email",placeholder:"Enter email"})),o.a.createElement(g.a.Group,{controlId:"password"},o.a.createElement(g.a.Label,null,"Password:"),o.a.createElement(g.a.Control,{onChange:this.handleOnchangePassword.bind(this),type:"password"})),o.a.createElement(g.a.Group,{controlId:"usertype"},o.a.createElement(g.a.Label,null,"user type:"),o.a.createElement(g.a.Control,{onChange:this.handleOnchangeUsertype.bind(this),as:"select"},o.a.createElement("option",{value:"normaluser"},"user"),o.a.createElement("option",{value:"manager"},"manager"))),o.a.createElement(b.a,{onClick:this.handleLogin.bind(this),variant:"primary"},"Login"))),o.a.createElement(S.a,{show:this.state.isLoading,onHide:this.handleClose.bind(this)},o.a.createElement(S.a.Header,{closeButton:!0},o.a.createElement(S.a.Title,null,"Notice")),o.a.createElement(S.a.Body,null,this.state.message),o.a.createElement(S.a.Footer,null,o.a.createElement(b.a,{variant:"primary",onClick:this.handleClose.bind(this)},"OK"))))}}]),a}(o.a.Component),j=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={appointment:e.appointment,message:"deleteing....",showModal:!1},n}return Object(c.a)(a,[{key:"handleDeleteAppoint",value:function(){var e=this,t={bookid:this.state.appointment.bookid};console.log(t),this.setState({showModal:!0}),f(k+"/userbooking/".concat(this.state.appointment.apointid),t).then((function(t){t.succeed?e.setState({message:"succeed delete this appointment."}):e.setState({message:"something error, please try again."})}))}},{key:"onClickconfirmOk",value:function(){this.setState({showModal:!1})}},{key:"renderAction",value:function(){return o.a.createElement(b.a,{variant:"danger",onClick:this.handleDeleteAppoint.bind(this)},"delete")}},{key:"render",value:function(){var e=this.state.appointment,t=e.apointdate.split("T")[0].split("-"),a=new Date(t[0],parseInt(t[1])-1,t[2]);a.setDate(a.getDate()+1);var n=a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate(),r=e.deadline.split("T")[0].split("-"),l=new Date(r[0],parseInt(r[1])-1,r[2]);l.setDate(l.getDate()+1);var s=l.getFullYear()+"-"+(l.getMonth()+1)+"-"+l.getDate();return o.a.createElement(o.a.Fragment,null,o.a.createElement("tr",null,o.a.createElement("td",null,e.apointid),o.a.createElement("td",null,e.bookname),o.a.createElement("td",null,e.author),o.a.createElement("td",null,e.ISBN),o.a.createElement("td",null,n),o.a.createElement("td",null,s),o.a.createElement("td",null,this.renderAction())),o.a.createElement(S.a,{show:this.state.showModal},o.a.createElement(S.a.Header,null),o.a.createElement(S.a.Body,null,this.state.message),o.a.createElement(S.a.Footer,null,o.a.createElement(b.a,{bsStyle:"danger",onClick:this.onClickconfirmOk.bind(this)},"ok"))))}}]),a}(o.a.Component),B=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={isLoading:!0,appintments:[],hasResult:!1},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;E(k+"/userbooking").then((function(t){t.response.length>0?(console.log(t.response),t.response.map((function(t){e.setState((function(e){return{appintments:[].concat(Object(d.a)(e.appintments),[t])}}))})),e.setState({isLoading:!1,hasResult:!0})):e.setState({isLoading:!1})}))}},{key:"render",value:function(){return this.state.isLoading?o.a.createElement(w,null):this.state.hasResult?o.a.createElement(p.a,{responsive:!0},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",null,"#"),o.a.createElement("th",null,"Book name:"),o.a.createElement("th",null,"Author:"),o.a.createElement("th",null,"ISBN:"),o.a.createElement("th",null,"Appointed from:"),o.a.createElement("th",null,"Final Collect Date:"),o.a.createElement("th",null,"Action:"))),o.a.createElement("tbody",null,this.state.appintments.map((function(e,t){return o.a.createElement(j,{appointment:e,key:t})})))):o.a.createElement("p",null,"no result")}}]),a}(o.a.Component),M=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={appointment:e.appointment,message:"confirming....",showModal:!1,status:e.appointment.status},n}return Object(c.a)(a,[{key:"handleConfirm",value:function(){var e=this;this.setState({showModal:!0}),y(k+"/appointments/confirm/".concat(this.state.appointment.apointid)).then((function(t){t.succeed?e.setState({message:"succeed confirm this appointment, book status changed to borrowed.",status:"collected"}):e.setState({message:"something error, please try again."})}))}},{key:"onClickconfirmOk",value:function(){this.setState({showModal:!1})}},{key:"renderAction",value:function(){return"collected"!=this.state.status?o.a.createElement(b.a,{variant:"primary",onClick:this.handleConfirm.bind(this)},"Confirm"):o.a.createElement(b.a,{variant:"link"},"collected")}},{key:"render",value:function(){var e=this.state.appointment,t=e.apointdate.split("T")[0].split("-"),a=new Date(t[0],parseInt(t[1])-1,t[2]);a.setDate(a.getDate()+1);var n=a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate(),r=e.deadline.split("T")[0].split("-"),l=new Date(r[0],parseInt(r[1])-1,r[2]);l.setDate(l.getDate()+1);var s=l.getFullYear()+"-"+(l.getMonth()+1)+"-"+l.getDate();return o.a.createElement(o.a.Fragment,null,o.a.createElement("tr",null,o.a.createElement("td",null,e.apointid),o.a.createElement("td",null,e.bookname),o.a.createElement("td",null,e.normaluserid),o.a.createElement("td",null,n),o.a.createElement("td",null,s),o.a.createElement("td",null,this.renderAction())),o.a.createElement(S.a,{show:this.state.showModal},o.a.createElement(S.a.Header,null),o.a.createElement(S.a.Body,null,this.state.message),o.a.createElement(S.a.Footer,null,o.a.createElement(b.a,{bsStyle:"danger",onClick:this.onClickconfirmOk.bind(this)},"ok"))))}}]),a}(o.a.Component),I=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={isLoading:!0,appointments:[],hasResult:!1},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;E(k+"/appointments").then((function(t){t.response.length>0?(t.response.map((function(t){e.setState((function(e){return{appointments:[].concat(Object(d.a)(e.appointments),[t])}}))})),e.setState({isLoading:!1,hasResult:!0})):e.setState({isLoading:!1})}))}},{key:"render",value:function(){return this.state.isLoading?o.a.createElement(w,null):this.state.hasResult?o.a.createElement(p.a,{responsive:!0},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",null,"#"),o.a.createElement("th",null,"Book name:"),o.a.createElement("th",null,"Student id:"),o.a.createElement("th",null,"Appointed from:"),o.a.createElement("th",null,"Final Collect Date:"),o.a.createElement("th",null,"Action:"))),o.a.createElement("tbody",null,this.state.appointments.map((function(e,t){return o.a.createElement(M,{appointment:e,key:t})})))):o.a.createElement("p",null,"no result")}}]),a}(o.a.Component),A=a(100),D=a(95),N=a(96),F=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={isLoading:!0,bookid:e.bookid,bookname:"",bookauthor:"",bookisbn:"",bookstatus:"",showModal:!1,message:"please wait..."},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;E(k+"/books/".concat(this.state.bookid)).then((function(t){e.setState({bookname:t.response.bookname,bookauthor:t.response.author,bookisbn:t.response.ISBN,bookstatus:t.response.status,isLoading:!1})}))}},{key:"handleOnchangeName",value:function(e){this.setState({bookname:e.target.value})}},{key:"handleOnchangAuthor",value:function(e){this.setState({bookauthor:e.target.value})}},{key:"handleOnchangeISBN",value:function(e){this.setState({bookisbn:e.target.value})}},{key:"handleModifyBook",value:function(){var e=this,t={bookname:this.state.bookname,author:this.state.bookauthor,isbn:this.state.bookisbn};this.setState({showModal:!0}),y(k+"/managebooks/".concat(this.state.bookid),t).then((function(t){t.succeed?e.setState({message:"modify succeed."}):e.setState({message:"Something error."})}))}},{key:"handleDeleteBook",value:function(){var e=this;this.setState({showModal:!0}),f(k+"/managebooks/".concat(this.state.bookid)).then((function(t){t.succeed?e.setState({message:"delete book succeed."}):e.setState({message:"Something error."})}))}},{key:"renderButtonForStatus",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(b.a,{variant:"primary",onClick:this.handleModifyBook.bind(this)},"Modify"),o.a.createElement(b.a,{variant:"danger",onClick:this.handleDeleteBook.bind(this)},"Delete"))}},{key:"onClickconfirmOk",value:function(){this.setState({showModal:!1})}},{key:"render",value:function(){return this.state.isLoading?o.a.createElement(w,null):o.a.createElement(o.a.Fragment,null,o.a.createElement(S.a,{show:this.state.showModal},o.a.createElement(S.a.Header,null),o.a.createElement(S.a.Body,null,this.state.message),o.a.createElement(S.a.Footer,null,o.a.createElement(b.a,{variant:"danger",onClick:this.onClickconfirmOk.bind(this)},"ok"))),o.a.createElement("tr",null,o.a.createElement("td",null,this.state.bookid),o.a.createElement("td",null,o.a.createElement(g.a.Group,null,o.a.createElement(g.a.Control,{type:"text",onChange:this.handleOnchangeName.bind(this),value:this.state.bookname}))),o.a.createElement("td",null,o.a.createElement(g.a.Group,null,o.a.createElement(g.a.Control,{type:"text",onChange:this.handleOnchangAuthor.bind(this),value:this.state.bookauthor}))),o.a.createElement("td",null,o.a.createElement(g.a.Group,null,o.a.createElement(g.a.Control,{type:"number",onChange:this.handleOnchangeISBN.bind(this),value:this.state.bookisbn}))),o.a.createElement("td",null,this.renderButtonForStatus())))}}]),a}(o.a.Component),R=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={bookname:"",author:"",isbn:"",keyword:"",result:[],showAlert:!1,showModal:!1,isLoading:!1,message:"uploading...."},n}return Object(c.a)(a,[{key:"handleOnchangeBookName",value:function(e){this.setState({bookname:e.target.value})}},{key:"handleOnchangeAuthor",value:function(e){this.setState({author:e.target.value})}},{key:"handleOnchangeISBN",value:function(e){this.setState({isbn:e.target.value})}},{key:"handleOnchangeKeyword",value:function(e){this.setState({keyword:e.target.value})}},{key:"handleUpload",value:function(){var e=this,t=this.state,a=t.bookname,n=t.author,o=t.isbn,r={bookname:a,author:n,isbn:o};""==a||""==n||""==o?this.setState({showAlert:!0}):(this.setState({showModal:!0}),v(k+"/managebooks/upload",r).then((function(t){t.succeed?e.setState({message:"succeed upload a new book."}):e.setState({message:"something error, please try again."})})))}},{key:"handleSearch",value:function(){var e=this;this.setState({isLoading:!0,result:[]}),E(k+"/books?keyword=".concat(this.state.keyword)).then((function(t){t.response.length>0?(t.response.map((function(t,a){e.setState((function(e){return{result:[].concat(Object(d.a)(e.result),[t.bookid])}}))})),e.setState({isLoading:!1,isSearch:!0})):e.setState({isLoading:!1,noresult:!0,isSearch:!1})}))}},{key:"renderResult",value:function(){return this.state.isLoading?o.a.createElement(w,null):this.state.isSearch?o.a.createElement(o.a.Fragment,null,o.a.createElement(p.a,{responsive:!0},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",null,"#"),o.a.createElement("th",null,"Book Name"),o.a.createElement("th",null,"Book Author"),o.a.createElement("th",null,"Book ISBN"),o.a.createElement("th",null,"Action"))),o.a.createElement("tbody",null,this.state.result.map((function(e,t){return o.a.createElement(F,{bookid:e,key:t})}))))):this.state.noresult?o.a.createElement("p",null,"no result found. sorry."):void 0}},{key:"onClickconfirmOk",value:function(){this.setState({showModal:!1})}},{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(A.a,{defaultActiveKey:"uploadbook",transition:!1,id:"uncontrolled-tab-example"},o.a.createElement(D.a,{eventKey:"uploadbook",title:"Upload new book"},o.a.createElement(g.a,null,o.a.createElement(g.a.Group,{controlId:"bookname"},o.a.createElement(g.a.Label,null,"Book Name:"),o.a.createElement(g.a.Control,{onChange:this.handleOnchangeBookName.bind(this),type:"text",placeholder:"Enter book name"})),o.a.createElement(g.a.Group,{controlId:"bookauthor"},o.a.createElement(g.a.Label,null,"Book Author:"),o.a.createElement(g.a.Control,{onChange:this.handleOnchangeAuthor.bind(this),type:"text",placeholder:"Enter author"})),o.a.createElement(g.a.Group,{controlId:"ISBN"},o.a.createElement(g.a.Label,null,"Book ISBN:"),o.a.createElement(g.a.Control,{onChange:this.handleOnchangeISBN.bind(this),type:"number",placeholder:"Enter ISBN"}))),o.a.createElement(b.a,{variant:"primary",onClick:this.handleUpload.bind(this)},"upload"),o.a.createElement(N.a,{show:this.state.showAlert,variant:"danger"},"something empty. ")),o.a.createElement(D.a,{eventKey:"modifybook",title:"Book info modification"},o.a.createElement(g.a,null,o.a.createElement(g.a.Group,{controlId:"search"},o.a.createElement(g.a.Label,null,"Search Books"),o.a.createElement(g.a.Control,{onChange:this.handleOnchangeKeyword.bind(this),type:"text",placeholder:"Enter keyword"})),o.a.createElement(b.a,{onClick:this.handleSearch.bind(this),variant:"primary"},"Search")),this.renderResult())),o.a.createElement(S.a,{show:this.state.showModal},o.a.createElement(S.a.Header,null),o.a.createElement(S.a.Body,null,this.state.message),o.a.createElement(S.a.Footer,null,o.a.createElement(b.a,{bsStyle:"danger",onClick:this.onClickconfirmOk.bind(this)},"ok"))))}}]),a}(o.a.Component),T=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={username:"",password:"",confirmpwd:"",isLoading:!1,isRegister:!1,showAlert:!1,alertMsg:"something empty.",message:"Please wait..."},n}return Object(c.a)(a,[{key:"handleOnchangeUsername",value:function(e){this.setState({username:e.target.value})}},{key:"handleOnchangePassword",value:function(e){this.setState({password:e.target.value})}},{key:"handleOnchangeConfirmPwd",value:function(e){this.setState({confirmpwd:e.target.value})}},{key:"handleRegister",value:function(e){var t=this;this.setState({isLoading:!0});var a=this.state,n=a.username,o=a.password,r=a.confirmpwd;if(""==n||""==o||""==r)this.setState({showAlert:!0,isLoading:!1});else if(o!=r)this.setState({showAlert:!0,isLoading:!1,alertMsg:"password no match, pleas check again."});else{var l={username:this.state.username,password:this.state.password};v(k+"/register",l).then((function(e){e.succeed&&t.setState({message:"register succeed.",isRegister:!0})}))}}},{key:"handleClose",value:function(){this.setState({isLoading:!1}),this.state.isRegister&&(window.location.href="".concat("/librarysystemForntend","/login"))}},{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"contentBorder"},o.a.createElement(g.a,null,o.a.createElement(g.a.Group,{controlId:"username"},o.a.createElement(g.a.Label,null,"Email:"),o.a.createElement(g.a.Control,{onChange:this.handleOnchangeUsername.bind(this),type:"email",placeholder:"Enter email"})),o.a.createElement(g.a.Group,{controlId:"password"},o.a.createElement(g.a.Label,null,"Password:"),o.a.createElement(g.a.Control,{onChange:this.handleOnchangePassword.bind(this),type:"password"})),o.a.createElement(g.a.Group,{controlId:"confirmpwd"},o.a.createElement(g.a.Label,null,"Confirm password:"),o.a.createElement(g.a.Control,{onChange:this.handleOnchangeConfirmPwd.bind(this),type:"password"})),o.a.createElement(b.a,{onClick:this.handleRegister.bind(this),variant:"primary"},"Register"),o.a.createElement(N.a,{variant:"danger",show:this.state.showAlert},this.state.alertMsg))),o.a.createElement(S.a,{show:this.state.isLoading,onHide:this.handleClose.bind(this)},o.a.createElement(S.a.Header,{closeButton:!0},o.a.createElement(S.a.Title,null,"Notice")),o.a.createElement(S.a.Body,null,this.state.message),o.a.createElement(S.a.Footer,null,o.a.createElement(b.a,{variant:"primary",onClick:this.handleClose.bind(this)},"OK"))))}}]),a}(o.a.Component),x=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={borrow:e.borrow},n}return Object(c.a)(a,[{key:"render",value:function(){var e=this.state.borrow,t=e.borrowdate.split("T")[0].split("-"),a=new Date(t[0],parseInt(t[1])-1,t[2]);a.setDate(a.getDate()+1);var n=a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate(),r=e.returndate.split("T")[0].split("-"),l=new Date(r[0],parseInt(r[1])-1,r[2]);l.setDate(l.getDate()+1);var s=l.getFullYear()+"-"+(l.getMonth()+1)+"-"+l.getDate();return o.a.createElement(o.a.Fragment,null,o.a.createElement("tr",null,o.a.createElement("td",null,e.borrowid),o.a.createElement("td",null,e.bookname),o.a.createElement("td",null,e.author),o.a.createElement("td",null,e.ISBN),o.a.createElement("td",null,n),o.a.createElement("td",null,s)))}}]),a}(o.a.Component),H=[{path:"/",component:C,exact:!0,breadcrumbName:"Home"},{path:"/login",component:L,breadcrumbName:"Login"},{path:"/myappointment",component:B,breadcrumbName:"My appointments"},{path:"/allAppointments",component:I,breadcrumbName:"All appointments"},{path:"/bookmanagement",component:R,breadcrumbName:"Books management"},{path:"/register",component:T,breadcrumbName:"Register"},{path:"/myborrow",component:function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={isLoading:!0,borrows:[],hasResult:!1},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;E(k+"/borrow").then((function(t){t.response.length>0?(console.log(t.response),t.response.map((function(t){e.setState((function(e){return{borrows:[].concat(Object(d.a)(e.borrows),[t])}}))})),e.setState({isLoading:!1,hasResult:!0})):e.setState({isLoading:!1})}))}},{key:"render",value:function(){return this.state.isLoading?o.a.createElement(w,null):this.state.hasResult?o.a.createElement(p.a,{responsive:!0},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",null,"#"),o.a.createElement("th",null,"Book name:"),o.a.createElement("th",null,"Author:"),o.a.createElement("th",null,"ISBN:"),o.a.createElement("th",null,"Borrowed on:"),o.a.createElement("th",null,"Should return by:"))),o.a.createElement("tbody",null,this.state.borrows.map((function(e,t){return o.a.createElement(x,{borrow:e,key:t})})))):o.a.createElement("p",null,"no result")}}]),a}(o.a.Component),breadcrumbName:"My Borrows"}],G=a(99),P=a(70),U=a(20),K=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={isLogin:!1,usertype:"customer"},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;v(k+"/login/check").then((function(t){e.setState({isLogin:t.isLogin}),t.usertype&&e.setState({usertype:t.usertype})}))}},{key:"handleLogout",value:function(){localStorage.setItem("logintoken",""),window.location="/"}},{key:"render",value:function(){var e=this.state.usertype;return"customer"==e?o.a.createElement(G.a,{fixed:"top",bg:"dark",expand:"lg",variant:"dark"},o.a.createElement(G.a.Toggle,{"aria-controls":"basic-navbar-nav"}),o.a.createElement(G.a.Collapse,{id:"basic-navbar-nav"},o.a.createElement(P.a,null,o.a.createElement(U.LinkContainer,{to:"/"},o.a.createElement(P.a.Link,null,"Home")),o.a.createElement(U.LinkContainer,{to:"/register"},o.a.createElement(P.a.Link,null,"Register")),o.a.createElement(U.LinkContainer,{to:"/login"},o.a.createElement(P.a.Link,null,"Login"))))):"normaluser"==e?o.a.createElement(G.a,{fixed:"top",bg:"dark",expand:"lg",variant:"dark"},o.a.createElement(G.a.Toggle,{"aria-controls":"basic-navbar-nav"}),o.a.createElement(G.a.Collapse,{id:"basic-navbar-nav"},o.a.createElement(P.a,null,o.a.createElement(U.LinkContainer,{to:"/"},o.a.createElement(P.a.Link,null,"Home")),o.a.createElement(U.LinkContainer,{to:"/myappointment"},o.a.createElement(P.a.Link,null,"My Appointment")),o.a.createElement(U.LinkContainer,{to:"/myborrow"},o.a.createElement(P.a.Link,null,"My Borrow")),o.a.createElement(P.a.Link,{onClick:this.handleLogout.bind(this)},"Logout")))):"manager"==e?o.a.createElement(G.a,{fixed:"top",bg:"dark",expand:"lg",variant:"dark"},o.a.createElement(G.a.Toggle,{"aria-controls":"basic-navbar-nav"}),o.a.createElement(G.a.Collapse,{id:"basic-navbar-nav"},o.a.createElement(P.a,null,o.a.createElement(U.LinkContainer,{to:"/"},o.a.createElement(P.a.Link,null,"Home")),o.a.createElement(U.LinkContainer,{to:"/allAppointments"},o.a.createElement(P.a.Link,null,"Appointments")),o.a.createElement(U.LinkContainer,{to:"/bookmanagement"},o.a.createElement(P.a.Link,null,"Book management")),o.a.createElement(U.LinkContainer,{to:"/logout"},o.a.createElement(P.a.Link,{onClick:this.handleLogout.bind(this)},"Logout"))))):void 0}}]),a}(o.a.Component),z=(a(87),function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){return Object(i.a)(this,a),t.call(this,e)}return Object(c.a)(a,[{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(K,null),o.a.createElement("div",{style:{"padding-top":"10vh","padding-left":"5vw","padding-right":"5vw"}},Object(m.a)(H)))}}]),a}(o.a.Component)),Y=a(69),J=(a(89),a(90),a(48));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var q={contentData:o.a.createElement(o.a.Fragment,null,"test"),isLogin:!1,userid:null,otherid:-1,usertype:"unknown"};var W=Object(J.b)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"setIsLogin":return{isLogin:t.isLogin};default:return e}}));l.a.render(o.a.createElement(Y.a,{store:W},o.a.createElement(s.HashRouter,{basename:"/"},o.a.createElement(z,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[72,1,2]]]);
//# sourceMappingURL=main.7362056a.chunk.js.map